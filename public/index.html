<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="VisualEyes">
		<meta name="description" content="Visualize your favorite songs">

		<title>VisualEyes</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="./files/css">
		<link rel="stylesheet" type="text/css" href="./files/main.css">

		<style type="text/css"></style>
	</head>

	<body>

		<div class="nav">
			<div class="nav__left">
			<a href="./info.html">Info</a>
			</div>

			<div class="nav__right">
				<a href="./index.html">Home</a>

			</div>
		</div>

		<div class="container" style="top: 188px; left: 150px;">

			<div class="intro">

				<img src="./files/Logo.png" alt="Logo" width="75%" height="25%" style="top: 5.7%;  left:30%;" >
			</div>

			<input type="text" name="track_url" class="form__track-url" placeholder="Paste a link to the track page...">
			<a href="/visualizer.html">
				<div id="submitButton" class="button button--download">
					Visualize
				</div>
			</a>

			<script>
				$('#submitButton').click( function() {

					var urlString = $('.form__track-url').val();
					console.log(urlString);
					var dataToSend = JSON.stringify({'url':urlString});
					console.log(dataToSend);
				    $.ajax({
				    	url: "/download",
					    type: "POST",
					    contentType: 'application/json',
					    data: dataToSend , // pass that text to the server as a correct JSON String
					    success: function (msg) {
					    	// alert(msg.d);
					    	//$('div').append('<audio controls><source src="horse.mp3" type="audio/mpeg"></audio>');
				   		},
				    error: function (type) { alert("ERROR!!" + type.responseText); }
				    });

					//$.post("/download", {urlString: urlString})
				});
			</script>
		</div>

	</body>
</html>